!function(e,t){var n="string",r="number",u="character",i="object",o="selectionStart",a="selectionEnd",l="length",c="moveStart",f="moveEnd",s=t.document,v=function(e,t){var r=0,u=0,i=Object.prototype.toString.call(t);if(typeof t===n){var o=e.indexOf(t);o>=0&&(r=o,u=o+t[l])}else if("[object RegExp]"===i){var a=t.exec(e);null!==a&&(r=a.index,u=r+a[0][l])}return[r,u]},p=function(e){var t,n,i,v;if(t=e[o],n=e[a],typeof t===r)return[t,n];if(s.selection){var p="createRange",y="duplicate";return i=s.selection[p]()[y](),v=s.selection[p]()[y](),i[f](u,e.value[l]),t=e.value.lastIndexOf(i.text),""===i.text&&(t=e.value[l]),v[c](u,-1*e.value[l]),n=v.text[l],[t,n]}return null},y=function(e,t,n){e[o]=t,e[a]=n,e.focus()},d={init:function(e,t){var n,u,o=this,a=o.get(0);if(void 0==e)return p(a);if(typeof e===i)e.valueOf().splice?(n=e[0],u=e[1]):typeof e.start===r&&typeof e.end===r&&(n=e.start,u=e.end);else{if(typeof e!==r)return null;n=e,u=typeof t===r?t:n}return y(a,n,u),o},start:function(e){var t,n=this,r=n.get(0);return e?(t=v(r.value,e),y(r,t[0],t[0])):y(r,0,0),n},end:function(e){var t,n=this,r=n.get(0),u=r.value[l];return e?(t=v(r.value,e),y(r,t[1],t[1])):y(r,u,u),n},text:function(e){var t=this,n=t.get(0),r=n.value,u=p(n);return e?(n.value=r.substr(0,u[0])+e+r.substr(u[1]),n.focus(),t):r.slice(u[0],u[1])},find:function(e){var t=this,n=t.get(0),r=v(n.value,e);return r[0]==r[1]?n.focus():y(n,r[0],r[1]),t}};e.fn.caret=function(t){var n=this;return d[t]?d[t].apply(n,Array.prototype.slice.call(arguments,1)):typeof t!==i&&typeof t!==r&&t?(e.error("Method "+t+" does not exist on jQuery.caret"),null):d.init.apply(n,arguments)}}(jQuery,window);